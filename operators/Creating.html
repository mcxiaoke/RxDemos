<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>File Creating.html in D:\git\RxDocs\operators</title>
  <link rel="stylesheet" href="../style/github-style.css">
</head>
<body>
<h2 id="create">Create</h2>
<p>使用一个函数从头开始创建一个Observable</p>
<p><img src="../images/operators/create.c.png" alt="create"></p>
<p>你可以使用<code>Create</code>操作符从头开始创建一个Observable，给这个操作符传递一个接受观察者作为参数的函数，编写这个函数让它的行为表现为一个Observable--恰当的调用观察者的onNext，onError和onCompleted方法。</p>
<p>一个形式正确的有限Observable必须尝试调用观察者的onCompleted正好一次或者它的onError正好一次，而且此后不能再调用观察者的任何其它方法。</p>
<p><img src="../images/operators/create.png" alt="create"></p>
<p>RxJava将这个操作符实现为 <code>create</code> 方法。</p>
<p>建议你在传递给<code>create</code>方法的函数中检查观察者的<code>isUnsubscribed</code>状态，以便在没有观察者的时候，让你的Observable停止发射数据或者做昂贵的运算。</p>
<p>示例代码：</p>
<pre><code class="lang-java">
Observable.create(new Observable.OnSubscribe&lt;Integer&gt;() {
    @Override
    public void call(Subscriber&lt;? super Integer&gt; observer) {
        try {
            if (!observer.isUnsubscribed()) {
                for (int i = 1; i &lt; 5; i++) {
                    observer.onNext(i);
                }
                observer.onCompleted();
            }
        } catch (Exception e) {
            observer.onError(e);
        }
    }
 } ).subscribe(new Subscriber&lt;Integer&gt;() {
        @Override
        public void onNext(Integer item) {
            System.out.println(&quot;Next: &quot; + item);
        }

        @Override
        public void onError(Throwable error) {
            System.err.println(&quot;Error: &quot; + error.getMessage());
        }

        @Override
        public void onCompleted() {
            System.out.println(&quot;Sequence complete.&quot;);
        }
    });
</code></pre>
<p>输出：</p>
<pre><code>Next: 1
Next: 2
Next: 3
Next: 4
Sequence complete.
</code></pre><p><code>create</code>方法默认不在任何特定的调度器上执行。</p>
<ul>
<li>Javadoc: <a href="http://reactivex.io/RxJava/javadoc/rx/Observable.html#create(rx.Observable.OnSubscribe"><code>create(OnSubscribe)</code></a>)</li>
</ul>
</body>
<html>
